{"ast":null,"code":"import React from'react';import{useDrag,useDrop}from'react-dnd';import{ComponentRenderer}from'./ComponentRenderer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const DraggableComponent=_ref=>{let{component,index,onClick,isSelected,onMove,onDelete}=_ref;const[{isDragging},drag]=useDrag({type:'EXISTING_COMPONENT',item:{id:component.id,index},collect:monitor=>({isDragging:monitor.isDragging()})});const[{isOver},drop]=useDrop({accept:'EXISTING_COMPONENT',hover:(item,monitor)=>{if(!monitor.isOver()){return;}if(item.index===index){return;}onMove(item.id,index);item.index=index;},collect:monitor=>({isOver:monitor.isOver()})});return/*#__PURE__*/_jsxs(\"div\",{ref:node=>drag(drop(node)),className:\"relative group transition-all duration-200 \".concat(isDragging?'opacity-50 scale-95':'',\" \").concat(isOver?'border-l-4 border-primary-500':''),children:[/*#__PURE__*/_jsx(ComponentRenderer,{component:component,onClick:onClick,isSelected:isSelected}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-1 opacity-0 group-hover:opacity-100 transition-opacity z-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 text-white px-1.5 py-0.5 rounded text-xs font-medium whitespace-nowrap shadow-md\",children:component.type}),/*#__PURE__*/_jsx(\"div\",{className:\"p-1 bg-white rounded shadow-md border border-gray-200 cursor-move hover:bg-gray-50 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-3 h-3 text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 8h16M4 16h16\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();if(window.confirm('Are you sure you want to delete this component?')){onDelete(component.id);}},className:\"p-1 bg-red-500 hover:bg-red-600 text-white rounded shadow-md transition-colors\",title:\"Delete component\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-3 h-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})})]});};","map":{"version":3,"names":["React","useDrag","useDrop","ComponentRenderer","jsx","_jsx","jsxs","_jsxs","DraggableComponent","_ref","component","index","onClick","isSelected","onMove","onDelete","isDragging","drag","type","item","id","collect","monitor","isOver","drop","accept","hover","ref","node","className","concat","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","e","stopPropagation","window","confirm","title"],"sources":["/Users/utshabluitel/Projects/email-temp-453/src/components/Builder/DraggableComponent.tsx"],"sourcesContent":["import React from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { EmailComponent } from '../../types';\nimport { ComponentRenderer } from './ComponentRenderer';\n\ninterface DraggableComponentProps {\n  component: EmailComponent;\n  index: number;\n  onClick: () => void;\n  isSelected: boolean;\n  onMove: (id: string, newIndex: number) => void;\n  onDelete: (id: string) => void;\n}\n\nexport const DraggableComponent: React.FC<DraggableComponentProps> = ({\n  component,\n  index,\n  onClick,\n  isSelected,\n  onMove,\n  onDelete,\n}) => {\n  const [{ isDragging }, drag] = useDrag({\n    type: 'EXISTING_COMPONENT',\n    item: { id: component.id, index },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [{ isOver }, drop] = useDrop({\n    accept: 'EXISTING_COMPONENT',\n    hover: (item: { id: string; index: number }, monitor) => {\n      if (!monitor.isOver()) {\n        return;\n      }\n\n      if (item.index === index) {\n        return;\n      }\n\n      onMove(item.id, index);\n      item.index = index;\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n    }),\n  });\n\n  return (\n    <div\n      ref={(node) => drag(drop(node))}\n      className={`relative group transition-all duration-200 ${\n        isDragging ? 'opacity-50 scale-95' : ''\n      } ${isOver ? 'border-l-4 border-primary-500' : ''}`}\n    >\n      <ComponentRenderer\n        component={component}\n        onClick={onClick}\n        isSelected={isSelected}\n      />\n      \n      {/* Top Overlay Controls - Sitting on the border line */}\n      <div className=\"absolute top-0 left-1 opacity-0 group-hover:opacity-100 transition-opacity z-10\">\n        <div className=\"flex items-center space-x-1\">\n          {/* Component Type Badge */}\n          <div className=\"bg-gray-800 text-white px-1.5 py-0.5 rounded text-xs font-medium whitespace-nowrap shadow-md\">\n            {component.type}\n          </div>\n          \n          {/* Drag Handle */}\n          <div className=\"p-1 bg-white rounded shadow-md border border-gray-200 cursor-move hover:bg-gray-50 transition-colors\">\n            <svg className=\"w-3 h-3 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 8h16M4 16h16\" />\n            </svg>\n          </div>\n          \n          {/* Delete Button */}\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (window.confirm('Are you sure you want to delete this component?')) {\n                onDelete(component.id);\n              }\n            }}\n            className=\"p-1 bg-red-500 hover:bg-red-600 text-white rounded shadow-md transition-colors\"\n            title=\"Delete component\"\n          >\n            <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}